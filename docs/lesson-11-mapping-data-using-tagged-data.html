<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>11 Lesson 11: Mapping Data (using tagged data) | Digital Humanities in Middle Eastern Studies</title>
  <meta name="description" content="This is a collection of relevant materials for the class ‘57-525 S: Digital Humanities in Middle East Studies — Introduction to Algorithmic Analysis’ (WS2021), offered at the University of Hamburg (Afrika-Asien Institut) and taught by Maxim G. Romanov" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="11 Lesson 11: Mapping Data (using tagged data) | Digital Humanities in Middle Eastern Studies" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://maximromanov.github.io/dh_in_mes/" />
  
  <meta property="og:description" content="This is a collection of relevant materials for the class ‘57-525 S: Digital Humanities in Middle East Studies — Introduction to Algorithmic Analysis’ (WS2021), offered at the University of Hamburg (Afrika-Asien Institut) and taught by Maxim G. Romanov" />
  <meta name="github-repo" content="maximromanov/dh_in_mes" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="11 Lesson 11: Mapping Data (using tagged data) | Digital Humanities in Middle Eastern Studies" />
  
  <meta name="twitter:description" content="This is a collection of relevant materials for the class ‘57-525 S: Digital Humanities in Middle East Studies — Introduction to Algorithmic Analysis’ (WS2021), offered at the University of Hamburg (Afrika-Asien Institut) and taught by Maxim G. Romanov" />
  

<meta name="author" content="Maxim G. Romanov" />


<meta name="date" content="2022-01-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="touch-icon.png" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="lesson-10-graphing-chronological-distribution-of-tagged-entities.html"/>
<link rel="next" href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DH Methods for Middle Eastern Studies: Toward A Handbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Syllabus</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-details"><i class="fa fa-check"></i>Course Details</a></li>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#aims-contents-and-method-of-the-course"><i class="fa fa-check"></i><b>0.1</b> Aims, contents and method of the course</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#course-evaluation"><i class="fa fa-check"></i><b>0.2</b> Course Evaluation</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#class-participation"><i class="fa fa-check"></i><b>0.3</b> Class Participation</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#homework"><i class="fa fa-check"></i><b>0.4</b> Homework</a></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#final-project"><i class="fa fa-check"></i><b>0.5</b> Final Project</a></li>
<li class="chapter" data-level="0.6" data-path="index.html"><a href="index.html#study-materials"><i class="fa fa-check"></i><b>0.6</b> Study materials:</a></li>
<li class="chapter" data-level="0.7" data-path="index.html"><a href="index.html#software-tools-technologies"><i class="fa fa-check"></i><b>0.7</b> Software, Tools, &amp; Technologies:</a></li>
<li class="chapter" data-level="0.8" data-path="index.html"><a href="index.html#submitting-homework"><i class="fa fa-check"></i><b>0.8</b> Submitting Homework:</a></li>
<li class="chapter" data-level="0.9" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i><b>0.9</b> Schedule</a></li>
<li class="chapter" data-level="0.10" data-path="index.html"><a href="index.html#lesson-topics-subject-to-modification"><i class="fa fa-check"></i><b>0.10</b> Lesson Topics (subject to modification)</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="lesson-01-academic-writing-i.html"><a href="lesson-01-academic-writing-i.html"><i class="fa fa-check"></i><b>1</b> Lesson 01: Academic Writing I</a>
<ul>
<li class="chapter" data-level="1.1" data-path="lesson-01-academic-writing-i.html"><a href="lesson-01-academic-writing-i.html#bibliography-managers"><i class="fa fa-check"></i><b>1.1</b> Bibliography Managers</a></li>
<li class="chapter" data-level="1.2" data-path="lesson-01-academic-writing-i.html"><a href="lesson-01-academic-writing-i.html#zotero"><i class="fa fa-check"></i><b>1.2</b> Zotero</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="lesson-01-academic-writing-i.html"><a href="lesson-01-academic-writing-i.html#getting-started"><i class="fa fa-check"></i><b>1.2.1</b> Getting Started</a></li>
<li class="chapter" data-level="1.2.2" data-path="lesson-01-academic-writing-i.html"><a href="lesson-01-academic-writing-i.html#main-functionality"><i class="fa fa-check"></i><b>1.2.2</b> Main Functionality</a></li>
<li class="chapter" data-level="1.2.3" data-path="lesson-01-academic-writing-i.html"><a href="lesson-01-academic-writing-i.html#additional-functionality-plug-ins"><i class="fa fa-check"></i><b>1.2.3</b> Additional Functionality: Plug-Ins</a></li>
<li class="chapter" data-level="1.2.4" data-path="lesson-01-academic-writing-i.html"><a href="lesson-01-academic-writing-i.html#zotfile"><i class="fa fa-check"></i><b>1.2.4</b> Zotfile</a></li>
<li class="chapter" data-level="1.2.5" data-path="lesson-01-academic-writing-i.html"><a href="lesson-01-academic-writing-i.html#better-bibtex-for-zotero"><i class="fa fa-check"></i><b>1.2.5</b> Better BibTeX for Zotero</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="lesson-01-academic-writing-i.html"><a href="lesson-01-academic-writing-i.html#HWL01"><i class="fa fa-check"></i><b>1.3</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="lesson-02-command-line.html"><a href="lesson-02-command-line.html"><i class="fa fa-check"></i><b>2</b> Lesson 02: Command Line</a>
<ul>
<li class="chapter" data-level="2.1" data-path="lesson-02-command-line.html"><a href="lesson-02-command-line.html#command-line"><i class="fa fa-check"></i><b>2.1</b> Command Line</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="lesson-02-command-line.html"><a href="lesson-02-command-line.html#the-filesystem"><i class="fa fa-check"></i><b>2.1.1</b> The filesystem</a></li>
<li class="chapter" data-level="2.1.2" data-path="lesson-02-command-line.html"><a href="lesson-02-command-line.html#getting-started-with-the-command-line"><i class="fa fa-check"></i><b>2.1.2</b> Getting started with the command line</a></li>
<li class="chapter" data-level="2.1.3" data-path="lesson-02-command-line.html"><a href="lesson-02-command-line.html#components-of-the-command-line"><i class="fa fa-check"></i><b>2.1.3</b> Components of the command line</a></li>
<li class="chapter" data-level="2.1.4" data-path="lesson-02-command-line.html"><a href="lesson-02-command-line.html#file-paths-and-path-notations"><i class="fa fa-check"></i><b>2.1.4</b> File paths and path notations</a></li>
<li class="chapter" data-level="2.1.5" data-path="lesson-02-command-line.html"><a href="lesson-02-command-line.html#command-line-arguments"><i class="fa fa-check"></i><b>2.1.5</b> Command line arguments</a></li>
<li class="chapter" data-level="2.1.6" data-path="lesson-02-command-line.html"><a href="lesson-02-command-line.html#more-commands"><i class="fa fa-check"></i><b>2.1.6</b> More commands</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="lesson-02-command-line.html"><a href="lesson-02-command-line.html#HWL02"><i class="fa fa-check"></i><b>2.2</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lesson-03-version-control.html"><a href="lesson-03-version-control.html"><i class="fa fa-check"></i><b>3</b> Lesson 03: Version Control</a>
<ul>
<li class="chapter" data-level="3.1" data-path="lesson-03-version-control.html"><a href="lesson-03-version-control.html#version-control-and-collaboration"><i class="fa fa-check"></i><b>3.1</b> Version Control and Collaboration</a></li>
<li class="chapter" data-level="3.2" data-path="lesson-03-version-control.html"><a href="lesson-03-version-control.html#setting-up-git"><i class="fa fa-check"></i><b>3.2</b> Setting-up <code>git</code></a></li>
<li class="chapter" data-level="3.3" data-path="lesson-03-version-control.html"><a href="lesson-03-version-control.html#general-git-workflow"><i class="fa fa-check"></i><b>3.3</b> General <code>git</code> workflow</a></li>
<li class="chapter" data-level="3.4" data-path="lesson-03-version-control.html"><a href="lesson-03-version-control.html#main-git-commands"><i class="fa fa-check"></i><b>3.4</b> Main <code>git</code> Commands</a></li>
<li class="chapter" data-level="3.5" data-path="lesson-03-version-control.html"><a href="lesson-03-version-control.html#some-useful-command-line-commands-to-remember"><i class="fa fa-check"></i><b>3.5</b> Some useful command line commands to remember</a></li>
<li class="chapter" data-level="3.6" data-path="lesson-03-version-control.html"><a href="lesson-03-version-control.html#practice"><i class="fa fa-check"></i><b>3.6</b> Practice</a></li>
<li class="chapter" data-level="3.7" data-path="lesson-03-version-control.html"><a href="lesson-03-version-control.html#HWL03"><i class="fa fa-check"></i><b>3.7</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lesson-04-sustainable-academic-writing.html"><a href="lesson-04-sustainable-academic-writing.html"><i class="fa fa-check"></i><b>4</b> Lesson 04: Sustainable Academic Writing</a>
<ul>
<li class="chapter" data-level="4.1" data-path="lesson-04-sustainable-academic-writing.html"><a href="lesson-04-sustainable-academic-writing.html#markdown-pandoc-the-tex-family-and-obsidian"><i class="fa fa-check"></i><b>4.1</b> <code>markdown</code>, <code>pandoc</code>, the <code>*TeX</code> family, and <code>obsidian</code></a></li>
<li class="chapter" data-level="4.2" data-path="lesson-04-sustainable-academic-writing.html"><a href="lesson-04-sustainable-academic-writing.html#class-notes"><i class="fa fa-check"></i><b>4.2</b> Class Notes</a></li>
<li class="chapter" data-level="4.3" data-path="lesson-04-sustainable-academic-writing.html"><a href="lesson-04-sustainable-academic-writing.html#pandoc-commands"><i class="fa fa-check"></i><b>4.3</b> <code>pandoc</code> <em>Commands</em></a></li>
<li class="chapter" data-level="4.4" data-path="lesson-04-sustainable-academic-writing.html"><a href="lesson-04-sustainable-academic-writing.html#analytical-writing-with-markdown"><i class="fa fa-check"></i><b>4.4</b> Analytical Writing with markdown</a></li>
<li class="chapter" data-level="4.5" data-path="lesson-04-sustainable-academic-writing.html"><a href="lesson-04-sustainable-academic-writing.html#zettelkasten-with-obsidian"><i class="fa fa-check"></i><b>4.5</b> Zettelkasten with Obsidian</a></li>
<li class="chapter" data-level="4.6" data-path="lesson-04-sustainable-academic-writing.html"><a href="lesson-04-sustainable-academic-writing.html#reference-materials"><i class="fa fa-check"></i><b>4.6</b> Reference Materials:</a></li>
<li class="chapter" data-level="4.7" data-path="lesson-04-sustainable-academic-writing.html"><a href="lesson-04-sustainable-academic-writing.html#HWL04"><i class="fa fa-check"></i><b>4.7</b> Homework</a></li>
<li class="chapter" data-level="4.8" data-path="lesson-04-sustainable-academic-writing.html"><a href="lesson-04-sustainable-academic-writing.html#appendix-text-for-your-main.md-file."><i class="fa fa-check"></i><b>4.8</b> Appendix: <em>TEXT for your <code>main.md</code> file.</em></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html"><i class="fa fa-check"></i><b>5</b> Lesson 05: Robust Searches</a>
<ul>
<li class="chapter" data-level="5.1" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#constructing-robust-searches-with-regular-expressions"><i class="fa fa-check"></i><b>5.1</b> Constructing Robust Searches with Regular Expressions</a></li>
<li class="chapter" data-level="5.2" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#regular-expressions"><i class="fa fa-check"></i><b>5.2</b> <code>regular expressions</code></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#what-are-regular-expressions"><i class="fa fa-check"></i><b>5.2.1</b> What are <code>regular expressions</code>?**</a></li>
<li class="chapter" data-level="5.2.2" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#what-would-we-use-regular-expressions-for"><i class="fa fa-check"></i><b>5.2.2</b> What would we use <code>regular Expressions</code> for?</a></li>
<li class="chapter" data-level="5.2.3" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#the-basics"><i class="fa fa-check"></i><b>5.2.3</b> The Basics</a></li>
<li class="chapter" data-level="5.2.4" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#characters-special-characters"><i class="fa fa-check"></i><b>5.2.4</b> Characters <em>&amp;</em> Special Characters</a></li>
<li class="chapter" data-level="5.2.5" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#character-classes"><i class="fa fa-check"></i><b>5.2.5</b> Character Classes: <code>[]</code></a></li>
<li class="chapter" data-level="5.2.6" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#ranges-within-classes"><i class="fa fa-check"></i><b>5.2.6</b> Ranges (within classes)</a></li>
<li class="chapter" data-level="5.2.7" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#repeaters"><i class="fa fa-check"></i><b>5.2.7</b> Repeaters</a></li>
<li class="chapter" data-level="5.2.8" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#lab-intro-in-the-practicum-file."><i class="fa fa-check"></i><b>5.2.8</b> Lab: <em>Intro</em> (in the <em>practicum file</em>).</a></li>
<li class="chapter" data-level="5.2.9" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#anchoring"><i class="fa fa-check"></i><b>5.2.9</b> Anchoring</a></li>
<li class="chapter" data-level="5.2.10" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#alternation-pipe"><i class="fa fa-check"></i><b>5.2.10</b> Alternation: “|” (<em>pipe</em>)</a></li>
<li class="chapter" data-level="5.2.11" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#grouping"><i class="fa fa-check"></i><b>5.2.11</b> Grouping</a></li>
<li class="chapter" data-level="5.2.12" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#lab-part-i-in-the-practicum-file."><i class="fa fa-check"></i><b>5.2.12</b> Lab: Part I (in the <em>practicum file</em>).</a></li>
<li class="chapter" data-level="5.2.13" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#replacement"><i class="fa fa-check"></i><b>5.2.13</b> Replacement</a></li>
<li class="chapter" data-level="5.2.14" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#capture"><i class="fa fa-check"></i><b>5.2.14</b> Capture</a></li>
<li class="chapter" data-level="5.2.15" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#capture-reformat"><i class="fa fa-check"></i><b>5.2.15</b> Capture <em>&amp;</em> Reformat</a></li>
<li class="chapter" data-level="5.2.16" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#lab-part-ii-in-the-practicum-file."><i class="fa fa-check"></i><b>5.2.16</b> Lab: Part II (in the <em>practicum file</em>).</a></li>
<li class="chapter" data-level="5.2.17" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#to-keep-in-mind"><i class="fa fa-check"></i><b>5.2.17</b> <em>To keep in mind</em></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#class-materials"><i class="fa fa-check"></i><b>5.3</b> Class materials</a></li>
<li class="chapter" data-level="5.4" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#digital-materials"><i class="fa fa-check"></i><b>5.4</b> Digital materials</a></li>
<li class="chapter" data-level="5.5" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#reference-materials-1"><i class="fa fa-check"></i><b>5.5</b> Reference Materials</a></li>
<li class="chapter" data-level="5.6" data-path="lesson-05-robust-searches.html"><a href="lesson-05-robust-searches.html#HWL05"><i class="fa fa-check"></i><b>5.6</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html"><i class="fa fa-check"></i><b>6</b> Lesson 06: Webscraping</a>
<ul>
<li class="chapter" data-level="6.1" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html#getting-to-know-wget"><i class="fa fa-check"></i><b>6.1</b> Getting to Know <code>WGET</code></a></li>
<li class="chapter" data-level="6.2" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html#software"><i class="fa fa-check"></i><b>6.2</b> Software</a></li>
<li class="chapter" data-level="6.3" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html#class"><i class="fa fa-check"></i><b>6.3</b> Class</a></li>
<li class="chapter" data-level="6.4" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html#sample-commands"><i class="fa fa-check"></i><b>6.4</b> Sample commands</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html#issues-with-wget-on-windows"><i class="fa fa-check"></i><b>6.4.1</b> Issues with <code>WGET</code> on Windows</a></li>
<li class="chapter" data-level="6.4.2" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html#issues-with-wget-on-mac"><i class="fa fa-check"></i><b>6.4.2</b> Issues with <code>WGET</code> on Mac</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html#a-sidenote-on-issues-in-general"><i class="fa fa-check"></i><b>6.5</b> A sidenote on issues in general</a></li>
<li class="chapter" data-level="6.6" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html#practicing-scraping"><i class="fa fa-check"></i><b>6.6</b> Practicing Scraping</a></li>
<li class="chapter" data-level="6.7" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html#practice-1-very-easy"><i class="fa fa-check"></i><b>6.7</b> Practice 1: very easy</a></li>
<li class="chapter" data-level="6.8" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html#practice-2-easy-ish"><i class="fa fa-check"></i><b>6.8</b> Practice 2: easy-ish</a></li>
<li class="chapter" data-level="6.9" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html#practice-3-aka-homework-a-tiny-bit-tricky"><i class="fa fa-check"></i><b>6.9</b> Practice 3 (aka <em>Homework</em>): a tiny-bit tricky</a></li>
<li class="chapter" data-level="6.10" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html#RML06"><i class="fa fa-check"></i><b>6.10</b> Reference Materials</a></li>
<li class="chapter" data-level="6.11" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html#HWL06"><i class="fa fa-check"></i><b>6.11</b> Homework</a></li>
<li class="chapter" data-level="6.12" data-path="lesson-06-webscraping.html"><a href="lesson-06-webscraping.html#SHL06"><i class="fa fa-check"></i><b>6.12</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html"><i class="fa fa-check"></i><b>7</b> Lesson 07: Understanding Structured Data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html#major-data-formats"><i class="fa fa-check"></i><b>7.1</b> Major Data Formats</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html#xml-extensible-markup-language"><i class="fa fa-check"></i><b>7.1.1</b> XML (<em>Extensible Markup Language</em>)</a></li>
<li class="chapter" data-level="7.1.2" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html#csvtsv-comma-separated-values-tab-separated-values"><i class="fa fa-check"></i><b>7.1.2</b> CSV/TSV (<em>Comma-Separated Values</em>/ <em>Tab-Separated Values</em>)</a></li>
<li class="chapter" data-level="7.1.3" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html#json-javascript-object-notation"><i class="fa fa-check"></i><b>7.1.3</b> JSON (<em>JavaScript Object Notation</em>)</a></li>
<li class="chapter" data-level="7.1.4" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html#yml-or-yaml-yet-another-markup-language-yaml-aint-markup-language"><i class="fa fa-check"></i><b>7.1.4</b> YML or YAML (<em>Yet Another Markup Language</em> &gt; <em>YAML Ain’t Markup Language</em>)</a></li>
<li class="chapter" data-level="7.1.5" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html#bibtex-most-common-bibliographic-format"><i class="fa fa-check"></i><b>7.1.5</b> <code>BibTeX</code>: <em>most common bibliographic format</em></a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html#larger-examples"><i class="fa fa-check"></i><b>7.2</b> Larger Examples</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html#csv-tsv"><i class="fa fa-check"></i><b>7.2.1</b> <code>CSV</code> / <code>TSV</code></a></li>
<li class="chapter" data-level="7.2.2" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html#json"><i class="fa fa-check"></i><b>7.2.2</b> <code>JSON</code></a></li>
<li class="chapter" data-level="7.2.3" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html#ymlyaml"><i class="fa fa-check"></i><b>7.2.3</b> <code>YML</code>/<code>YAML</code></a></li>
<li class="chapter" data-level="7.2.4" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html#installing-libraries-for-python"><i class="fa fa-check"></i><b>7.2.4</b> Installing libraries for <code>python</code></a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html#in-class-practice-and-homework"><i class="fa fa-check"></i><b>7.3</b> In-Class Practice (and homework)</a></li>
<li class="chapter" data-level="7.4" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html#HWL07"><i class="fa fa-check"></i><b>7.4</b> Homework</a></li>
<li class="chapter" data-level="7.5" data-path="lesson-07-understanding-structured-data.html"><a href="lesson-07-understanding-structured-data.html#SolutionL07"><i class="fa fa-check"></i><b>7.5</b> Solution</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lesson-08-converting-the-dispatch.html"><a href="lesson-08-converting-the-dispatch.html"><i class="fa fa-check"></i><b>8</b> Lesson 08: Converting the Dispatch</a>
<ul>
<li class="chapter" data-level="8.1" data-path="lesson-08-converting-the-dispatch.html"><a href="lesson-08-converting-the-dispatch.html#original-xml-files-analysis"><i class="fa fa-check"></i><b>8.1</b> Original XML files analysis</a></li>
<li class="chapter" data-level="8.2" data-path="lesson-08-converting-the-dispatch.html"><a href="lesson-08-converting-the-dispatch.html#convert-to-a-cleaner-format"><i class="fa fa-check"></i><b>8.2</b> Convert to a cleaner format</a></li>
<li class="chapter" data-level="8.3" data-path="lesson-08-converting-the-dispatch.html"><a href="lesson-08-converting-the-dispatch.html#in-class-practice-and-homework-1"><i class="fa fa-check"></i><b>8.3</b> In-Class Practice (and homework)</a></li>
<li class="chapter" data-level="8.4" data-path="lesson-08-converting-the-dispatch.html"><a href="lesson-08-converting-the-dispatch.html#HWL08"><i class="fa fa-check"></i><b>8.4</b> Homework</a></li>
<li class="chapter" data-level="8.5" data-path="lesson-08-converting-the-dispatch.html"><a href="lesson-08-converting-the-dispatch.html#SolutionL08"><i class="fa fa-check"></i><b>8.5</b> Solution</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lesson-09-extracting-tagged-data-for-analysis.html"><a href="lesson-09-extracting-tagged-data-for-analysis.html"><i class="fa fa-check"></i><b>9</b> Lesson 09: Extracting Tagged Data for Analysis</a>
<ul>
<li class="chapter" data-level="9.1" data-path="lesson-09-extracting-tagged-data-for-analysis.html"><a href="lesson-09-extracting-tagged-data-for-analysis.html#concept-of-tidy-data"><i class="fa fa-check"></i><b>9.1</b> Concept of <em>tidy data</em></a></li>
<li class="chapter" data-level="9.2" data-path="lesson-09-extracting-tagged-data-for-analysis.html"><a href="lesson-09-extracting-tagged-data-for-analysis.html#extracting-tagged-entities"><i class="fa fa-check"></i><b>9.2</b> Extracting tagged entities</a></li>
<li class="chapter" data-level="9.3" data-path="lesson-09-extracting-tagged-data-for-analysis.html"><a href="lesson-09-extracting-tagged-data-for-analysis.html#HWL09"><i class="fa fa-check"></i><b>9.3</b> Homework</a></li>
<li class="chapter" data-level="9.4" data-path="lesson-09-extracting-tagged-data-for-analysis.html"><a href="lesson-09-extracting-tagged-data-for-analysis.html#SolutionL09"><i class="fa fa-check"></i><b>9.4</b> Solution</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="lesson-10-graphing-chronological-distribution-of-tagged-entities.html"><a href="lesson-10-graphing-chronological-distribution-of-tagged-entities.html"><i class="fa fa-check"></i><b>10</b> Lesson 10: Graphing Chronological Distribution of Tagged Entities</a>
<ul>
<li class="chapter" data-level="10.1" data-path="lesson-10-graphing-chronological-distribution-of-tagged-entities.html"><a href="lesson-10-graphing-chronological-distribution-of-tagged-entities.html#abstractions-of-newspaper-articles"><i class="fa fa-check"></i><b>10.1</b> Abstractions of Newspaper Articles</a></li>
<li class="chapter" data-level="10.2" data-path="lesson-10-graphing-chronological-distribution-of-tagged-entities.html"><a href="lesson-10-graphing-chronological-distribution-of-tagged-entities.html#code-line-graph"><i class="fa fa-check"></i><b>10.2</b> Code: Line Graph</a></li>
<li class="chapter" data-level="10.3" data-path="lesson-10-graphing-chronological-distribution-of-tagged-entities.html"><a href="lesson-10-graphing-chronological-distribution-of-tagged-entities.html#missing-zeros-problem"><i class="fa fa-check"></i><b>10.3</b> Missing Zeros Problem</a></li>
<li class="chapter" data-level="10.4" data-path="lesson-10-graphing-chronological-distribution-of-tagged-entities.html"><a href="lesson-10-graphing-chronological-distribution-of-tagged-entities.html#code-lollipop-graph"><i class="fa fa-check"></i><b>10.4</b> Code: Lollipop Graph</a></li>
<li class="chapter" data-level="10.5" data-path="lesson-10-graphing-chronological-distribution-of-tagged-entities.html"><a href="lesson-10-graphing-chronological-distribution-of-tagged-entities.html#jupyter-notebook"><i class="fa fa-check"></i><b>10.5</b> Jupyter Notebook</a></li>
<li class="chapter" data-level="10.6" data-path="lesson-10-graphing-chronological-distribution-of-tagged-entities.html"><a href="lesson-10-graphing-chronological-distribution-of-tagged-entities.html#HWL10"><i class="fa fa-check"></i><b>10.6</b> Homework</a></li>
<li class="chapter" data-level="10.7" data-path="lesson-10-graphing-chronological-distribution-of-tagged-entities.html"><a href="lesson-10-graphing-chronological-distribution-of-tagged-entities.html#SolutionL10"><i class="fa fa-check"></i><b>10.7</b> Solution</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="lesson-11-mapping-data-using-tagged-data.html"><a href="lesson-11-mapping-data-using-tagged-data.html"><i class="fa fa-check"></i><b>11</b> Lesson 11: Mapping Data (using tagged data)</a>
<ul>
<li class="chapter" data-level="11.1" data-path="lesson-11-mapping-data-using-tagged-data.html"><a href="lesson-11-mapping-data-using-tagged-data.html#preparing-and-modeling-geospatial-data"><i class="fa fa-check"></i><b>11.1</b> Preparing and Modeling Geospatial Data</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="lesson-11-mapping-data-using-tagged-data.html"><a href="lesson-11-mapping-data-using-tagged-data.html#triples-n-triples"><i class="fa fa-check"></i><b>11.1.1</b> Triples (<code>N-triples</code>)</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="lesson-11-mapping-data-using-tagged-data.html"><a href="lesson-11-mapping-data-using-tagged-data.html#HWL11"><i class="fa fa-check"></i><b>11.2</b> Homework</a></li>
<li class="chapter" data-level="11.3" data-path="lesson-11-mapping-data-using-tagged-data.html"><a href="lesson-11-mapping-data-using-tagged-data.html#SolutionL11"><i class="fa fa-check"></i><b>11.3</b> Solution</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><i class="fa fa-check"></i><b>12</b> Lesson 12: Topic Modeling <em>&amp;</em> TF-IDF (automatic text analysis)</a>
<ul>
<li class="chapter" data-level="12.1" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html#goals"><i class="fa fa-check"></i><b>12.1</b> Goals:</a></li>
<li class="chapter" data-level="12.2" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html#software-1"><i class="fa fa-check"></i><b>12.2</b> Software</a></li>
<li class="chapter" data-level="12.3" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html#workbooks-jupyter-notebooks"><i class="fa fa-check"></i><b>12.3</b> Workbooks (jupyter notebooks)</a></li>
<li class="chapter" data-level="12.4" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html#installing-on-windows"><i class="fa fa-check"></i><b>12.4</b> Installing: on Windows</a></li>
<li class="chapter" data-level="12.5" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html#installing-on-mac-and-linux"><i class="fa fa-check"></i><b>12.5</b> Installing: on Mac and Linux</a></li>
<li class="chapter" data-level="12.6" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html#python-libraries-and-additional-data"><i class="fa fa-check"></i><b>12.6</b> python libraries and additional data</a></li>
<li class="chapter" data-level="12.7" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html#jupyter-notebook-1"><i class="fa fa-check"></i><b>12.7</b> jupyter notebook</a></li>
<li class="chapter" data-level="12.8" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html#installing-from-a-jupyter-notebook"><i class="fa fa-check"></i><b>12.8</b> installing from a jupyter notebook</a></li>
<li class="chapter" data-level="12.9" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html#files-scripts"><i class="fa fa-check"></i><b>12.9</b> Files &amp; Scripts</a></li>
<li class="chapter" data-level="12.10" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html#thinking-about-themes-and-topics"><i class="fa fa-check"></i><b>12.10</b> Thinking about themes and topics</a></li>
<li class="chapter" data-level="12.11" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html#implementation"><i class="fa fa-check"></i><b>12.11</b> Implementation</a></li>
<li class="chapter" data-level="12.12" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html#tf-idf"><i class="fa fa-check"></i><b>12.12</b> TF-IDF</a></li>
<li class="chapter" data-level="12.13" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html#HWL12"><i class="fa fa-check"></i><b>12.13</b> Homework</a></li>
<li class="chapter" data-level="12.14" data-path="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html"><a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html#SolutionL12"><i class="fa fa-check"></i><b>12.14</b> Solution</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="lesson-13-social-network-analysis.html"><a href="lesson-13-social-network-analysis.html"><i class="fa fa-check"></i><b>13</b> Lesson 13: Social Network Analysis</a>
<ul>
<li class="chapter" data-level="13.1" data-path="lesson-13-social-network-analysis.html"><a href="lesson-13-social-network-analysis.html#section"><i class="fa fa-check"></i><b>13.1</b> …</a></li>
<li class="chapter" data-level="13.2" data-path="lesson-13-social-network-analysis.html"><a href="lesson-13-social-network-analysis.html#HWL13"><i class="fa fa-check"></i><b>13.2</b> Homework</a></li>
<li class="chapter" data-level="13.3" data-path="lesson-13-social-network-analysis.html"><a href="lesson-13-social-network-analysis.html#SolutionL13"><i class="fa fa-check"></i><b>13.3</b> Solution</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i>Appendix</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Digital Humanities in Middle Eastern Studies</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lesson-11-mapping-data-using-tagged-data" class="section level1" number="11">
<h1><span class="header-section-number">11</span> Lesson 11: Mapping Data (using tagged data)</h1>
<div id="preparing-and-modeling-geospatial-data" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Preparing and Modeling Geospatial Data</h2>
<p>In a similar manner we can also graph geographical data — in combination with the temporary dimension. For this, however, we need to think through what kind of insight we can possibly get from geospatial data and how it should be prepared for mapping.</p>
<p>Let’s start with a simple task: we will map the geospatial data from one of the previous lessons: <a href="./files/settlements.csv">settlements from the al-Thurayya Gazetteer</a>. Below is the code that produces an interactive map. (<strong>Note</strong>: it is possible to use <code>matplotlib</code> for mapping, but installation of needed components has become rather complicated recently, so we will proceed with a different library, <code>plotly</code>, which produced web-oriented maps.)</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb50-1"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb50-2"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb50-3"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-4" aria-hidden="true" tabindex="-1"></a>althurayyaFile <span class="op">=</span> <span class="st">&quot;settlements.csv&quot;</span></span>
<span id="cb50-5"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-6" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(althurayyaFile, sep<span class="op">=</span><span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, header<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb50-7"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span>
<span id="cb50-8"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-9"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-9" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.scatter_geo(df, lon<span class="op">=</span><span class="st">&#39;lon&#39;</span>, lat<span class="op">=</span><span class="st">&#39;lat&#39;</span>, color<span class="op">=</span><span class="st">&quot;region_URI&quot;</span>,</span>
<span id="cb50-10"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-10" aria-hidden="true" tabindex="-1"></a>                     hover_name<span class="op">=</span><span class="st">&quot;names_eng_translit&quot;</span>, size<span class="op">=</span>df[<span class="st">&quot;top_size&quot;</span>]<span class="op">*</span>df[<span class="st">&quot;top_size&quot;</span>],</span>
<span id="cb50-11"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-11" aria-hidden="true" tabindex="-1"></a>                     projection<span class="op">=</span><span class="st">&quot;natural earth&quot;</span>, fitbounds<span class="op">=</span><span class="st">&#39;locations&#39;</span>)</span>
<span id="cb50-12"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-13"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-13" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb50-14"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-14" aria-hidden="true" tabindex="-1"></a>    title_text<span class="op">=</span><span class="st">&#39;Provinces of the classical Islamic World (IX-Xthe centuries CE)&lt;br&gt;(Click legend to toggle provinces)&#39;</span>,</span>
<span id="cb50-15"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-15" aria-hidden="true" tabindex="-1"></a>    showlegend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb50-16"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-16" aria-hidden="true" tabindex="-1"></a>    geo<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb50-17"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-17" aria-hidden="true" tabindex="-1"></a>        scope<span class="op">=</span><span class="st">&#39;world&#39;</span>,</span>
<span id="cb50-18"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-18" aria-hidden="true" tabindex="-1"></a>        landcolor<span class="op">=</span><span class="st">&#39;rgb(250, 250, 250)&#39;</span>,</span>
<span id="cb50-19"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb50-20"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb50-21"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-22"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-22" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb50-23"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-24"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-24" aria-hidden="true" tabindex="-1"></a><span class="co"># the following line will save the graph into an html file</span></span>
<span id="cb50-25"><a href="lesson-11-mapping-data-using-tagged-data.html#cb50-25" aria-hidden="true" tabindex="-1"></a>fig.write_html(<span class="st">&quot;althurayya.html&quot;</span>)</span></code></pre></div>
<p>We can get the following map (for an interactive map, try <a href="./files/althurayya.html">this link</a>):</p>
<p><img src="files/althurayya.png" />
We can also map our geographical data dynamically, if we want to highlight its chronological dimension. Below is the example of the growth of US cities. <a href="./files/us_cities_pop.html">Click here for the interactive graph</a>.</p>
<p><img src="files/us_cities_pop.png" />
The following code is used to produce the visualization above. Use this as a starting point for mapping data from the <em>Dispatch</em>. You can download the <code>us_cities_pop.csv</code> from <a href="./files/us_cities_pop.csv">here</a>. One thing to keep in mind, the chronological data must be passed to the function as <code>string</code>, not as <code>date</code> (that is why there is no conversion to the date format in the code below).</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb51-1"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb51-2"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb51-3"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb51-4"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-5" aria-hidden="true" tabindex="-1"></a>us_cities_data <span class="op">=</span> <span class="st">&quot;us_cities_pop.csv&quot;</span></span>
<span id="cb51-6"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-6" aria-hidden="true" tabindex="-1"></a>usCities <span class="op">=</span> pd.read_csv(us_cities_data, sep<span class="op">=</span><span class="st">&quot;,&quot;</span>, header<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb51-7"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-8"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co"># plot places</span></span>
<span id="cb51-9"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-9" aria-hidden="true" tabindex="-1"></a>placesAll <span class="op">=</span> usCities[[<span class="st">&#39;year&#39;</span>, <span class="st">&#39;cityst&#39;</span>, <span class="st">&#39;population&#39;</span>, <span class="st">&#39;lat&#39;</span>, <span class="st">&#39;lon&#39;</span>]]</span>
<span id="cb51-10"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(placesAll)</span>
<span id="cb51-11"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-12"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-12" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.scatter_geo(placesAll, lon<span class="op">=</span><span class="st">&#39;lon&#39;</span>, lat<span class="op">=</span><span class="st">&#39;lat&#39;</span>,</span>
<span id="cb51-13"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-13" aria-hidden="true" tabindex="-1"></a>                     hover_name<span class="op">=</span><span class="st">&quot;cityst&quot;</span>,</span>
<span id="cb51-14"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-14" aria-hidden="true" tabindex="-1"></a>                     animation_frame<span class="op">=</span><span class="st">&quot;year&quot;</span>,</span>
<span id="cb51-15"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-15" aria-hidden="true" tabindex="-1"></a>                     size<span class="op">=</span><span class="st">&#39;population&#39;</span>)</span>
<span id="cb51-16"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-17"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-17" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb51-18"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-18" aria-hidden="true" tabindex="-1"></a>    title_text<span class="op">=</span><span class="st">&#39;Growth of US cities (1790-2010)&#39;</span>,</span>
<span id="cb51-19"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-19" aria-hidden="true" tabindex="-1"></a>    showlegend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb51-20"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-20" aria-hidden="true" tabindex="-1"></a>    geo<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb51-21"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-21" aria-hidden="true" tabindex="-1"></a>        scope<span class="op">=</span><span class="st">&#39;usa&#39;</span>,</span>
<span id="cb51-22"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-22" aria-hidden="true" tabindex="-1"></a>        landcolor<span class="op">=</span><span class="st">&#39;rgb(235, 235, 235)&#39;</span>,</span>
<span id="cb51-23"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-23" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb51-24"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-25"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-26"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-26" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb51-27"><a href="lesson-11-mapping-data-using-tagged-data.html#cb51-27" aria-hidden="true" tabindex="-1"></a>fig.write_html(<span class="st">&quot;us_cities_pop.html&quot;</span>)</span></code></pre></div>
<p>Now, let’s get back to our Dispatch data. We have placenames tagged — and we already have the data ready for processing. We can focus on a specific period of time (by filtering our data, including only dates that we are interested in). Then we need to calculate frequencies of mentions of placenames — we can use these values to size dots on the final map. Unfortunately, a very important element is missing — as you recall, our data does not have any coordinates. Luckily, we have unique identifiers from the Getty Thesaurus of Geographical Names. What we can do is to extract coordinates from the Thesaurus and connect them to corresponding placenames in our data.</p>
<ul>
<li>Getty Thesaurus is available for download here: <a href="http://tgndownloads.getty.edu/" class="uri">http://tgndownloads.getty.edu/</a> and here: <a href="http://vocab.getty.edu/dataset/tgn/" class="uri">http://vocab.getty.edu/dataset/tgn/</a></li>
<li>You can download <code>explicit.zip</code> from <a href="http://vocab.getty.edu/dataset/tgn/" class="uri">http://vocab.getty.edu/dataset/tgn/</a></li>
<li>There is a file <code>TGNOut_Coordinates.nt</code> with coordinates. You will need to write a script to extract coordinates from this file in order to use them. I suggest you convert this file into a usable CSV/TSV (the format is <code>N-triples</code>).</li>
</ul>
<div id="triples-n-triples" class="section level3" number="11.1.1">
<h3><span class="header-section-number">11.1.1</span> Triples (<code>N-triples</code>)</h3>
<p>What are triples? This is one of the most robust formats that can describe any kind of data. The main idea is that every triple is expressed through the structure <code>subject-predicate-object</code>. There are multiple formats for expressing triples (for example, RDF, N-Triples, etc.) (<a href="https://en.wikipedia.org/wiki/Semantic_triple"><em>more details…</em></a>).</p>
<p>Let’s take a look at the following example from <code>TGNOut_Coordinates.nt</code>. There are three triples (<code>N-triples</code>) which together describe a specific object (which in our data would look like <code>tgn,1000007</code>).</p>
<pre><code>&lt;http://vocab.getty.edu/tgn/1000007-geometry&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://schema.org/GeoCoordinates&gt; .
&lt;http://vocab.getty.edu/tgn/1000007-geometry&gt; &lt;http://schema.org/latitude&gt; &quot;-83.843&quot;^^&lt;http://www.w3.org/2001/XMLSchema#decimal&gt; .
&lt;http://vocab.getty.edu/tgn/1000007-geometry&gt; &lt;http://schema.org/longitude&gt; &quot;65.725&quot;^^&lt;http://www.w3.org/2001/XMLSchema#decimal&gt; .</code></pre>
<p>Each triple is stored on a separate line, ending with a period (“.”). Elements of each triple are separated with spaces. Each triple has the same structure—<code>subject-predicate-object</code>—and can be read as follows:</p>
<ul>
<li>Triple 1: entity <code>tgn,1000007</code> has (expressed in a particular manner) geographical coordinates;</li>
<li>Triple 2: entity <code>tgn,1000007</code> has decimal latitude <code>-83.843</code>;</li>
<li>Triple 3: entity <code>tgn,1000007</code> has decimal longitude <code>65.725</code>;</li>
</ul>
<p>You should have no problems writing a script that converts this data into a CSV with the structure: <code>ID</code>, <code>lon</code>, and <code>lat</code>. (Technically, you can also store these triples in a CSV/TSV format, but that would require additional conversion later.)</p>
<p>If you are not up to this challenge, you can use the CSV file that I have already prepared, to make your life a bit easier: <a href="./files/TGNOut_Coordinates.csv.zip">TGNOut_Coordinates.csv.zip</a></p>
<p>If everything done correctly, the final map may look like what you see below. <a href="./files/dispatch_1860_to_65.html">The complete interactive map can be found here.</a>):</p>
<p><img src="files/dispatch_1860_to_65.png" /></p>
<!-- Here is the link to the description of how dynamic maps can be done: [Bubble Map with Animation](https://plotly.com/python/bubble-maps/). Use this example to produce something similar for the Dispatch data. -->
<p>Last but not least, we may get interesting maps if we map places that co-occur with some specific names. An example of Gen. Sherman and Atlanta could be quite interesting (we have seen the graphs in the previous lesson), although in such cases a chronological graph of mentions of Atlanta—only in articles where Gen. Sherman is mentioned—may be a more clear option (see the preceding lesson). Please, try to code a solution that will do one or the other.</p>
</div>
</div>
<div id="HWL11" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> Homework</h2>
<ul>
<li><p>Graph geographical data from the Dispatch. Experiment with different periods and different selections of placenames (for example, Richmond and Virginia will be the most frequently mentioned placenames—because the newspaper was published in Richmond, Virginia; this would mean that these two places will overshadow all other places.)</p>
<ul>
<li>Suggestions:
<ul>
<li>you can create a separate data file that only has placenames (<code>articleID</code>, <code>date</code>, <code>placename</code>, <code>lat</code>, <code>lon</code>)</li>
<li>you can map places in a more complex manner. For example, map only placenames that are mentioned in the same articles as, say, General Sherman. In this case we may expect the maps to reflect his campaign through Georgia and the Carolinas (or, more precisely, the Dispatch’s coverage of Gen. Sherman’s campaign).</li>
<li>for interactive maps, you can use <code>Plotly</code> library: <a href="https://plotly.com/python/bubble-maps/" class="uri">https://plotly.com/python/bubble-maps/</a>.</li>
</ul></li>
</ul></li>
<li><p>Finish the assigned task;</p></li>
<li><p>Annotate your script (i.e., add comment to every line of code describing what is happening there);</p></li>
<li><p>Additional materials:</p>
<ul>
<li>Interactive maps with <code>Plotly</code>: <a href="https://plotly.com/python/bubble-maps/" class="uri">https://plotly.com/python/bubble-maps/</a>;</li>
<li>Basemap Matplotlib Toolkit: <a href="https://matplotlib.org/basemap/users/examples.html">Plotting data on a map (Example Gallery)</a>.</li>
<li>Python Data Science Handbook by Jake VanderPlas <a href="https://www.oreilly.com/library/view/python-data-science/9781491912126/ch04.html">Chapter 4. Visualization with Matplotlib</a>; <a href="https://jakevdp.github.io/PythonDataScienceHandbook/04.13-geographic-data-with-basemap.html">Geographic Data with Basemap</a>;</li>
<li><a href="https://www.bigendiandata.com/2017-06-27-Mapping_in_Jupyter/">How to plot data on maps in Jupyter using Matplotlib, Plotly, and Bokeh</a>;</li>
<li><a href="http://introtopython.org/visualization_earthquakes.html">Visualization: Mapping Global Earthquake Activity</a>.</li>
</ul></li>
</ul>
<p><strong>Submitting homework:</strong></p>
<ul>
<li>Homework assignment must be submitted by the beginning of the next class;</li>
<li>Now, that you know how to use GitHub, you will be submitting your homework pushing it to github:
<ul>
<li>Create a relevant subfolder in your repository and place your HW files there; push them to your GitHub account;
<ul>
<li>Email me the link to your repository with a short message (Something like: <em>I have completed homework for Lesson 3, which is uploaded to my repository … in subfolder <code>L03</code></em>)</li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="SolutionL11" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> Solution</h2>
<!--The solution for the homework will be added soon...-->
<p>These are model solutions to the assignments to this lesson:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb53-1"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># EXTRACT TGN DATA</span></span>
<span id="cb53-2"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb53-4"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="bu">file</span> <span class="op">=</span> <span class="st">&quot;TGNOut_Coordinates.nt&quot;</span></span>
<span id="cb53-5"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-6"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-6" aria-hidden="true" tabindex="-1"></a>csvDataDic <span class="op">=</span> {}</span>
<span id="cb53-7"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-8"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="bu">file</span>) <span class="im">as</span> f1:</span>
<span id="cb53-9"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> f1:</span>
<span id="cb53-10"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">&quot;latitude&quot;</span> <span class="kw">in</span> line:</span>
<span id="cb53-11"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-11" aria-hidden="true" tabindex="-1"></a>            line <span class="op">=</span> line.split(<span class="st">&quot; &quot;</span>)</span>
<span id="cb53-12"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-12" aria-hidden="true" tabindex="-1"></a>            ID <span class="op">=</span> re.search(<span class="vs">r&quot;(tgn/\d+)&quot;</span>, line[<span class="dv">0</span>]).group(<span class="dv">1</span>).replace(<span class="st">&quot;/&quot;</span>, <span class="st">&quot;,&quot;</span>)</span>
<span id="cb53-13"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-13" aria-hidden="true" tabindex="-1"></a>            lat <span class="op">=</span> line[<span class="dv">2</span>].split(<span class="st">&#39;&quot;^^&#39;</span>)[<span class="dv">0</span>][<span class="dv">1</span>:]</span>
<span id="cb53-14"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-15"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> ID <span class="kw">in</span> csvDataDic:</span>
<span id="cb53-16"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-16" aria-hidden="true" tabindex="-1"></a>                csvDataDic[ID][<span class="dv">1</span>] <span class="op">=</span> lat</span>
<span id="cb53-17"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb53-18"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-18" aria-hidden="true" tabindex="-1"></a>                csvDataDic[ID] <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>]</span>
<span id="cb53-19"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-19" aria-hidden="true" tabindex="-1"></a>                csvDataDic[ID][<span class="dv">0</span>] <span class="op">=</span> ID</span>
<span id="cb53-20"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-20" aria-hidden="true" tabindex="-1"></a>                csvDataDic[ID][<span class="dv">1</span>] <span class="op">=</span> lat</span>
<span id="cb53-21"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-22"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> <span class="st">&quot;longitude&quot;</span> <span class="kw">in</span> line:</span>
<span id="cb53-23"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-23" aria-hidden="true" tabindex="-1"></a>            line <span class="op">=</span> line.split(<span class="st">&quot; &quot;</span>)</span>
<span id="cb53-24"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-24" aria-hidden="true" tabindex="-1"></a>            ID <span class="op">=</span> re.search(<span class="vs">r&quot;(tgn/\d+)&quot;</span>, line[<span class="dv">0</span>]).group(<span class="dv">1</span>).replace(<span class="st">&quot;/&quot;</span>, <span class="st">&quot;,&quot;</span>)</span>
<span id="cb53-25"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-25" aria-hidden="true" tabindex="-1"></a>            lon <span class="op">=</span> line[<span class="dv">2</span>].split(<span class="st">&#39;&quot;^^&#39;</span>)[<span class="dv">0</span>][<span class="dv">1</span>:]</span>
<span id="cb53-26"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-27"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-27" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> ID <span class="kw">in</span> csvDataDic:</span>
<span id="cb53-28"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-28" aria-hidden="true" tabindex="-1"></a>                csvDataDic[ID][<span class="dv">2</span>] <span class="op">=</span> lon</span>
<span id="cb53-29"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-29" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb53-30"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-30" aria-hidden="true" tabindex="-1"></a>                csvDataDic[ID] <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>]</span>
<span id="cb53-31"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-31" aria-hidden="true" tabindex="-1"></a>                csvDataDic[ID][<span class="dv">0</span>] <span class="op">=</span> ID</span>
<span id="cb53-32"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-32" aria-hidden="true" tabindex="-1"></a>                csvDataDic[ID][<span class="dv">2</span>] <span class="op">=</span> lon</span>
<span id="cb53-33"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb53-34"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-34" aria-hidden="true" tabindex="-1"></a>            <span class="cf">pass</span></span>
<span id="cb53-35"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-36"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-36" aria-hidden="true" tabindex="-1"></a>csvData <span class="op">=</span> []</span>
<span id="cb53-37"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-37" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> k, v <span class="kw">in</span> csvDataDic.items():</span>
<span id="cb53-38"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-38" aria-hidden="true" tabindex="-1"></a>    csvData.append(<span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>.join(v))</span>
<span id="cb53-39"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-40"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-40" aria-hidden="true" tabindex="-1"></a>csvData <span class="op">=</span> <span class="st">&quot;itemId</span><span class="ch">\t</span><span class="st">LAT</span><span class="ch">\t</span><span class="st">LON</span><span class="ch">\n</span><span class="st">&quot;</span> <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>.join(csvData)</span>
<span id="cb53-41"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-41" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="bu">file</span>.replace(<span class="st">&quot;.nt&quot;</span>, <span class="st">&quot;.csv&quot;</span>), <span class="st">&quot;w&quot;</span>, encoding<span class="op">=</span><span class="st">&quot;utf8&quot;</span>) <span class="im">as</span> f9:</span>
<span id="cb53-42"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-42" aria-hidden="true" tabindex="-1"></a>    f9.write(csvData)</span>
<span id="cb53-43"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-44"><a href="lesson-11-mapping-data-using-tagged-data.html#cb53-44" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Done!&quot;</span>)</span></code></pre></div>
<p>The following lines of code <em>merge</em> two tables in such a way that coordinates are added to all placenames—matching done on the <code>itemId</code> column. Two additional columns are added — with latitudes and longitudes; when</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb54-1"><a href="lesson-11-mapping-data-using-tagged-data.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># MERGE TGN DATA</span></span>
<span id="cb54-2"><a href="lesson-11-mapping-data-using-tagged-data.html#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="lesson-11-mapping-data-using-tagged-data.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb54-4"><a href="lesson-11-mapping-data-using-tagged-data.html#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="lesson-11-mapping-data-using-tagged-data.html#cb54-5" aria-hidden="true" tabindex="-1"></a>tgnDataFile <span class="op">=</span> <span class="st">&quot;TGNOut_Coordinates.csv&quot;</span></span>
<span id="cb54-6"><a href="lesson-11-mapping-data-using-tagged-data.html#cb54-6" aria-hidden="true" tabindex="-1"></a>dispatchDataFile <span class="op">=</span> <span class="st">&quot;entities.csv&quot;</span></span>
<span id="cb54-7"><a href="lesson-11-mapping-data-using-tagged-data.html#cb54-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-8"><a href="lesson-11-mapping-data-using-tagged-data.html#cb54-8" aria-hidden="true" tabindex="-1"></a>tgnData <span class="op">=</span> pd.read_csv(tgnDataFile, sep<span class="op">=</span><span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, header<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb54-9"><a href="lesson-11-mapping-data-using-tagged-data.html#cb54-9" aria-hidden="true" tabindex="-1"></a>dispatchData <span class="op">=</span> pd.read_csv(dispatchDataFile, sep<span class="op">=</span><span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, header<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb54-10"><a href="lesson-11-mapping-data-using-tagged-data.html#cb54-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-11"><a href="lesson-11-mapping-data-using-tagged-data.html#cb54-11" aria-hidden="true" tabindex="-1"></a>dispatchDataUpd <span class="op">=</span> pd.merge(dispatchData, tgnData, how<span class="op">=</span><span class="st">&#39;left&#39;</span>, on<span class="op">=</span><span class="st">&quot;itemId&quot;</span>)</span></code></pre></div>
<p>The final dataframe looks like what you see below. You can see that some rows have <code>NaN</code> values (<code>not a number</code>) in columns <code>LAT</code> and <code>LON</code> — this essentially means that these rows could not be matched (because persnames and orgnames do not have TGN identifiers).</p>
<pre><code>                     articleID        date   itemType                           itemUnified         itemID      LAT      LON
0       1864-04-28_article_001  1864-04-28  placename        gordonsville, orange, virginia    tgn,2111971  38.1333 -78.1833
1       1864-04-28_article_002  1864-04-28  placename  plymouth, washington, north carolina    tgn,2076159  35.8667 -76.7333
2       1864-04-28_article_002  1864-04-28  placename  plymouth, washington, north carolina    tgn,2076159  35.8667 -76.7333
3       1864-04-28_article_002  1864-04-28   persname         wessels,brigadier-general,,,,  wessels,h.,w.      NaN      NaN
4       1864-04-28_article_002  1864-04-28   persname                          lincoln,,,,,        lincoln      NaN      NaN
...                        ...         ...        ...                                   ...            ...      ...      ...
989392  1864-03-31_article_169  1864-03-31   persname                         hunt,,chas,,,      hunt,chas      NaN      NaN
989393  1864-03-31_article_170  1864-03-31   persname                            davis,,,,,    davis,waddy      NaN      NaN
989394  1864-03-31_article_170  1864-03-31  placename    albemarle, virginia, united states    tgn,2002137  38.0333 -78.5500
989395  1864-03-31_article_170  1864-03-31   persname                             cook,,,,,           cook      NaN      NaN
989396  1864-03-31_article_170  1864-03-31   persname                        turner,,geo,,,         turner      NaN      NaN</code></pre>
<p>The following will generate “dynamic” maps:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb56-1"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DYNAMIC MAPS</span></span>
<span id="cb56-2"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb56-4"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb56-5"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb56-6"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-7"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-7" aria-hidden="true" tabindex="-1"></a>tgnDataFile <span class="op">=</span> <span class="st">&quot;TGNOut_Coordinates.csv&quot;</span></span>
<span id="cb56-8"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-8" aria-hidden="true" tabindex="-1"></a>dispatchDataFile <span class="op">=</span> <span class="st">&quot;entities.csv&quot;</span></span>
<span id="cb56-9"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-10"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-10" aria-hidden="true" tabindex="-1"></a>tgnData <span class="op">=</span> pd.read_csv(tgnDataFile, sep<span class="op">=</span><span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, header<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb56-11"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-11" aria-hidden="true" tabindex="-1"></a>dispatchData <span class="op">=</span> pd.read_csv(dispatchDataFile, sep<span class="op">=</span><span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, header<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb56-12"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-13"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-13" aria-hidden="true" tabindex="-1"></a>dispatchDataUpd <span class="op">=</span> pd.merge(dispatchData, tgnData, how<span class="op">=</span><span class="st">&#39;left&#39;</span>, on<span class="op">=</span><span class="st">&quot;itemID&quot;</span>)</span>
<span id="cb56-14"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-15"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-15" aria-hidden="true" tabindex="-1"></a>dispatchDataUpd[<span class="st">&quot;month&quot;</span>] <span class="op">=</span> [re.sub(<span class="st">&quot;-\d\d$&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="bu">str</span>(i)) <span class="cf">for</span> i <span class="kw">in</span> dispatchDataUpd[<span class="st">&quot;date&quot;</span>]]</span>
<span id="cb56-16"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-16" aria-hidden="true" tabindex="-1"></a><span class="co"># FOR THIS MAP WE NEED DATES STORED AS STRINGS</span></span>
<span id="cb56-17"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-17" aria-hidden="true" tabindex="-1"></a><span class="co"># dispatchDataUpd[&quot;month&quot;] = pd.to_datetime(dispatchDataUpd[&quot;month&quot;], format=&quot;%Y-%m&quot;)</span></span>
<span id="cb56-18"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-19"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-19" aria-hidden="true" tabindex="-1"></a>dfPlaces <span class="op">=</span> dispatchDataUpd</span>
<span id="cb56-20"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-20" aria-hidden="true" tabindex="-1"></a>dfPlaces <span class="op">=</span> dfPlaces[dfPlaces.itemType.<span class="bu">str</span>.contains(<span class="st">&quot;placename&quot;</span>, na<span class="op">=</span><span class="va">False</span>)]</span>
<span id="cb56-21"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-22"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-22" aria-hidden="true" tabindex="-1"></a>dfPersons <span class="op">=</span> dispatchDataUpd</span>
<span id="cb56-23"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-23" aria-hidden="true" tabindex="-1"></a>dfPersons <span class="op">=</span> dfPersons[dfPersons.itemType.<span class="bu">str</span>.contains(<span class="st">&quot;persname&quot;</span>, na<span class="op">=</span><span class="va">False</span>)]</span>
<span id="cb56-24"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-25"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-25" aria-hidden="true" tabindex="-1"></a><span class="co"># plot places</span></span>
<span id="cb56-26"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-26" aria-hidden="true" tabindex="-1"></a>placesAll <span class="op">=</span> dfPlaces[[<span class="st">&#39;month&#39;</span>, <span class="st">&#39;itemUnified&#39;</span>, <span class="st">&#39;LAT&#39;</span>, <span class="st">&#39;LON&#39;</span>]]</span>
<span id="cb56-27"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-27" aria-hidden="true" tabindex="-1"></a>placesAll[<span class="st">&#39;count&#39;</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb56-28"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-28" aria-hidden="true" tabindex="-1"></a>placesAll <span class="op">=</span> placesAll.groupby([<span class="st">&#39;month&#39;</span>, <span class="st">&#39;itemUnified&#39;</span>, <span class="st">&#39;LAT&#39;</span>, <span class="st">&#39;LON&#39;</span>]).count()</span>
<span id="cb56-29"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-29" aria-hidden="true" tabindex="-1"></a>placesAll <span class="op">=</span> placesAll.reset_index()</span>
<span id="cb56-30"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(placesAll)</span>
<span id="cb56-31"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-32"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-32" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.scatter_geo(placesAll, lon<span class="op">=</span><span class="st">&#39;LON&#39;</span>, lat<span class="op">=</span><span class="st">&#39;LAT&#39;</span>,</span>
<span id="cb56-33"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-33" aria-hidden="true" tabindex="-1"></a>                     hover_name<span class="op">=</span><span class="st">&quot;itemUnified&quot;</span>,</span>
<span id="cb56-34"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-34" aria-hidden="true" tabindex="-1"></a>                     animation_frame<span class="op">=</span><span class="st">&quot;month&quot;</span>, size<span class="op">=</span><span class="st">&#39;count&#39;</span>)</span>
<span id="cb56-35"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-36"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-36" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb56-37"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-37" aria-hidden="true" tabindex="-1"></a>    title_text<span class="op">=</span><span class="st">&#39;Placenames in the &lt;i&gt;Dispatch&lt;/i&gt; (1860-1865)&#39;</span>,</span>
<span id="cb56-38"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-38" aria-hidden="true" tabindex="-1"></a>    showlegend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb56-39"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-39" aria-hidden="true" tabindex="-1"></a>    geo<span class="op">=</span><span class="bu">dict</span>(scope<span class="op">=</span><span class="st">&#39;usa&#39;</span>, landcolor<span class="op">=</span><span class="st">&#39;rgb(235, 235, 235)&#39;</span>,</span>
<span id="cb56-40"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-40" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb56-41"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-41" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb56-42"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-43"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-43" aria-hidden="true" tabindex="-1"></a><span class="co">#fig.show()</span></span>
<span id="cb56-44"><a href="lesson-11-mapping-data-using-tagged-data.html#cb56-44" aria-hidden="true" tabindex="-1"></a>fig.write_html(<span class="st">&quot;dispatch_1860_to_65.html&quot;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lesson-10-graphing-chronological-distribution-of-tagged-entities.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lesson-12-topic-modeling-tf-idf-automatic-text-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "github"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": "https://github.com/maximromanov/dh_in_mes/edit/main/02-Lesson11.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/maximromanov/dh_in_mes/blob/main/02-Lesson11.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"info": true
});
});
</script>

</body>

</html>
